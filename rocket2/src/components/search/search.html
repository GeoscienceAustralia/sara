<div class="content">
    
    <!-- Metadata view -->
    <div id="panel-metadata" ng-show="searchCtrl.showMetadata" class="ng-hide rocket-panel"></div>

    <!-- List view -->
    <div id="panel-list" ng-show="searchCtrl.showList" class="ng-hide rocket-panel panel-list">
        <h1 class="center color__sara collection">{{searchCtrl.friendlyName}}</h1>
        <!--<p class="row center description">{{Description}}</p>-->
        <div class="large-6 columns">
            <div>
                <div id="staticmap"></div>
            </div>
            <div  class="center" style="height:50px;">
                <span ng-show="searchCtrl.polygonDrawningActivated" class="ng-hide">{{'search.tip.draw' | translate}}</span>
            </div>
            <div class="center">
                <!--<a ng-show="searchPolygon" class="ng-hide button" ng-click="resetSearchPolygon()" ng-bind="'search.reset.PolygonDrawning'|translate"></a>
                -->
            </div>
        </div>
        <div class="large-6 columns">
            <form class="search-list margin-top-10">
                <div class="large-12 columns center" ng-if="searchCtrl.features.length === 0">
                    <h3>{{'search.over' | translate}} {{searchCtrl.count}} {{'search.products' | translate}}</h3>
                </div>
                <div class="large-6 columns">
                    {{ ::'date.min' | translate | uppercase}}
                    <datepicker date-format="yyyy-MM-dd">
                        <input ng-model="searchCtrl.params.startDate" type="text" placeholder="date..."/>
                    </datepicker>
                </div>
                <div class="large-6 columns">
                    {{ ::'date.max' | translate | uppercase}}
                    <datepicker date-format="yyyy-MM-dd">
                        <input ng-model="searchCtrl.params.completionDate" type="text" placeholder="date..."/>
                    </datepicker>
                </div>
                <div class="large-12 columns">
                    {{ ::'platform'| translate | uppercase }}
                    <select ng-model="searchCtrl.params.platform" ng-options="name as name for (name, count) in searchCtrl.statistics.platform">
                        <option value="">-----</option>
                    </select>
                </div>
                <div class="large-6 columns">
                    {{ ::'instrument'| translate | uppercase }}
                    <select ng-model="searchCtrl.params.instrument" ng-options="name as name for (name, count) in searchCtrl.statistics.instrument">
                        <option value="">-----</option>
                    </select>
                </div>
                <div class="large-6 columns">
                    {{ ::'processingLevel'| translate | uppercase }}
                    <select ng-model="searchCtrl.params.processingLevel" ng-options="name as name for (name, count) in searchCtrl.statistics.processingLevel">
                        <option value="">-----</option>
                    </select>
                </div>
                <div class="large-6 columns">
                    {{ ::'productType'| translate | uppercase }}
                    <select ng-model="searchCtrl.params.productType" ng-options="name as name for (name, count) in searchCtrl.statistics.productType">
                        <option value="">-----</option>
                    </select>
                </div>
                <div class="large-6 columns">
                    {{'sensorMode'| translate | uppercase }}
                    <select ng-model="searchCtrl.params.sensorMode" ng-options="name as name for (name, count) in searchCtrl.statistics.sensorMode">
                        <option value="">-----</option>
                    </select>
                </div>
                <div class="large-12 columns">
                    {{'search.location' | translate | uppercase}}
                    <form method="get" ng-submit="searchCtrl.search()" name="searchForm">
                        <span>
                            <input id="searchLocation" type="search" ng-model="searchCtrl.params.location" class="form-control" required="required"
                                   placeholder="{{'search.ex' | translate}} T31TFM"/>
                        </span>
                    </form>
                </div>
                <div class="large-12 columns">
                    {{'search.keywords' | translate | uppercase}}
                    <form method="get" ng-submit="searchCtrl.search()" name="searchForm">
                        <span>
                            <input id="searchinput" type="search" ng-model="searchCtrl.params.q" class="form-control"
                                   required="required" placeholder="{{'search.ex' | translate}} Toulouse"/>
                        </span>
                    </form>
                </div>
            </form>
            <div class="center"> 
                <a class="button margin-top-20" ng-click="searchCtrl.activatePolygonDrawning()">
                    {{searchCtrl.polygonDrawningActivated === true ? 'search.deactivate.polygonDrawning' : 'search.activate.polygonDrawning'| translate}}</a>
                <a class="button bcancel margin-top-20" ng-click="searchCtrl.reset()" ng-bind="'search.resetfilters'|translate"></a>
                <a class="button bconfirm margin-top-20" ng-click="searchCtrl.search()" ng-bind="'search.updatelist'|translate"></a>
            </div>
        </div>
        <div class="large-12 columns">
            
        </div>
        
        <div class="large-12 columns tableContainer margin-top-10 center" style="padding-bottom:100px;"
             ng-if="searchCtrl.features.length > 0">
            <div class="center">
                <p>
                    <a class="page color__sara" ng-show="searchCtrl.features.length > 0 && searchCtrl.params.page !== 1"
                       ng-click="searchCtrl.previousPage()">
                        {{ ::'previous' | translate}}
                    </a>
                    {{ ::'from' | translate}} {{searchCtrl.resultCounter.start}} {{ ::'to' | translate }} {{searchCtrl.resultCounter.end}}
                    <a class="page color__sara" ng-show="searchCtrl.features.length > 0 && !searchCtrl.hasNoMore"
                       ng-click="searchCtrl.nextPage()">
                        {{ ::'next' | translate}}></a>
                </p>
            </div>
            <table class="">
                <tr>
                    <th>{{ ::'quicklook' | translate | uppercase}}</th>
                    <th ng-if="!searchCtrl.params.collection">{{ ::'collection' | translate | uppercase}}</th>
                    <th>{{ ::'location' | translate | uppercase}}</th>
                    <th>{{ ::'date' | translate | uppercase}}</th>
                    <th>{{ ::'platform' | uppercase}}</th>
                    <th>{{ ::'instrument' | uppercase}}</th>
                    <th>{{ ::'productType' | uppercase}}</th>
                    <th>{{ ::'resolution' | uppercase}}</th>
                    <th>{{ ::'orbitNumber' | uppercase}}</th>
                    <th>{{ ::'processingLevel' | uppercase}}</th>
                    <th>{{ ::'sensorMode' | uppercase}}</th>
                    <th></th>
                </tr>
                <tr ng-repeat="feature in searchCtrl.features" >
                    <td style="text-align: center;"><img class="thumbs" ng-src="{{ ::feature.properties.quicklook}}" title="{{ ::feature.properties.productIdentifier }}"
                         ng-click="searchCtrl.view('metadata', true, feature.properties.collection, feature.id)"></td>
                    <td ng-if="!params.collection">{{ ::feature.properties.collection}}</td>
                    <td>{{ ::feature.properties.keywords | extractlocation }}</td>
                    <td>{{ ::feature.properties.startDate | nicedate }}</td>
                    <td>{{ ::feature.properties.platform}}</td>
                    <td>{{ ::feature.properties.instrument}}</td>
                    <td>{{ ::feature.properties.productType}}</td>
                    <td>{{ ::feature.properties.resolution}} m</td>
                    <td>{{ ::feature.properties.orbitNumber}}</td>
                    <td>{{ ::feature.properties.processingLevel}}</td>
                    <td>{{ ::feature.properties.sensorMode}}</td>
                    <td style="text-align: center;" >
                        <a class="color__sara" ng-click="searchCtrl.view('metadata', true, feature.properties.collection, feature.id)">
                            {{ ::'details' | translate}}</a>
                        <a ng-if="mainController.isAuthenticated()" class="fa fa-3x fa-cart-plus"
                           ng-click="mainController.addToCart(feature, $event)"></a>
                    </td>
                </tr>
            </table>
            <div class="center margin-top-10">
                <p>
                    <a class="page color__sara" ng-show="searchCtrl.features.length > 0 && searchCtrl.params.page !== 1"
                       ng-click="searchCtrl.previousPage()">{{'previous' | translate}}</a>
                    {{'from' | translate}} {{searchCtrl.resultCounter.start}} {{'to' | translate }} {{searchCtrl.resultCounter.end}}
                    <a class="page color__sara" ng-show="searchCtrl.features.length > 0 && !searchCtrl.hasNoMore"
                       ng-click="searchCtrl.nextPage()">{{'next' | translate}}></a>
                </p>
            </div>
        </div>  
    </div>
</div>

